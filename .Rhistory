geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
windows()
ggplot(data= wq, aes( x= date, y= temperature_c)) +
ggtitle("Temperature for Sites 1-9") +
geom_point(color= "black") +
facet_wrap (~location_id, scales= "free_y")
windows()
ggplot(data= wq, aes( x= date, y= temperature_c)) +
ggtitle("Temperature for Sites 1-9") +
geom_point(color= "black") +
facet_wrap (~location_id, scales= "free_y")
indows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
windows()
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
install.packages ("TTR")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("TTR")
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
wqsma<-SMA(wq$salinity_psu_calculated,n=3)
plot.ts(wqsma)
wqsma<-SMA(wq$salinity_psu_calculated,n=10)
plot.ts(wqsma)
library("zoo")
wq$zoo_time<-strptime(wq$observation_datetime, "%Y-%m-%d %H:%M:%S")
View(wq)
temp.zoo<-zoo(wq$salinity_psu_calculated,wq$zoo_time)
m.av<-rollmean(temp.zoo, 3,fill = list(NA, NULL, NA))
m.av<-rollmean(temp.zoo, 3,fill = list(NA, NULL, NA))
wq1 <- subset(wq$sensor_id=="1")
wq1 <- subset(wq$sensor_id="1")
wq1 <- subset(wq, sensor_id="1")
View(wq1)
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("TTR")
library("zoo")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
wq1 <- subset(wq, sensor_id="1")
wq2 <- subset(wq, sensor_id="2")
wq3 <- subset(wq, sensor_id="3")
wq4 <- subset(wq, sensor_id="4")
wq5 <- subset(wq, sensor_id="5")
wq6 <- subset(wq, sensor_id="6")
wq7 <- subset(wq, sensor_id="7")
wq8 <- subset(wq, sensor_id="8")
wq9 <- subset(wq, sensor_id="9")
wq1$zoo_time<-strptime(wq1$observation_datetime, "%Y-%m-%d %H:%M:%S")
temp.zoo<-zoo(wq1$salinity_psu_calculated,wq1$zoo_time)
View(wq1)
anyDuplicated(wq1)
anyDuplicated(wq1observation_datetime)
anyDuplicated(wq1$observation_datetime)
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("TTR")
library("zoo")
#Guide: http://www.ahschulz.de/2013/07/23/installing-rmysql-under-windows/
# Download the MySQL connector https://dev.mysql.com/downloads/connector/odbc/
con <- dbConnect(MySQL(),
user="LCRoysterproject",
password="HLLV6Pske0vTzhIZfSya",
dbname="LCRoysterproject",
host="ict-prod-hosting05.mysql.osg.ufl.edu",
port= 3359)
# Listing all of the columns in the database
dbListTables(con)
wq <- dbReadTable(conn = con, name = 'lcroyster_buoyobservation')
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
#wq$date<- as.POSIXct(wq$date, tz="GMT")
standard=42.914
wq$sal <- convert_RtoS(wq$conductivity_mS_cm/standard,
t= wq$temperature_c, p= 0)
#Quick plots to check calculated salinity and temperature
ggplot(data= wq, aes( x= date, y= salinity_psu_calculated, color= "Salinity with Marelac")) +
geom_point(color= "black") +
ggtitle("Calculated Salinity for Sites 1-9") +
facet_wrap (~location_id, scales= "free_y")
ggplot(data= wq, aes( x= date, y= temperature_c)) +
ggtitle("Temperature for Sites 1-9") +
geom_point(color= "black") +
facet_wrap (~location_id, scales= "free_y")
install.packages("tidyquant")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("tidyquant")
install.packages("xts")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("tidyquant")
wq_ma %>%
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 50) +                 # Plot 50-day SMA
geom_ma(ma_fun = SMA, n = 200, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 50) +                 # Plot 50-day SMA
geom_ma(ma_fun = SMA, n = 200, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
library("tidyquant")
install.packages("xts")
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("tidyquant")
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 50) +                 # Plot 50-day SMA
geom_ma(ma_fun = SMA, n = 200, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 5) +                 # Plot 50-day SMA
geom_ma(ma_fun = SMA, n = 10, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 1) +                 # Plot 50-day SMA
#geom_ma(ma_fun = SMA, n = 10, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated, color=sensor_id)) +
geom_line() +                         # Plot stock price
geom_ma(ma_fun = SMA, n = 1) +                 # Plot 50-day SMA
#geom_ma(ma_fun = SMA, n = 10, color = "red") + # Plot 200-day SMA
coord_x_date(xlim = c(today() - weeks(12), today()),
ylim = c(100, 130))                     # Zoom in
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated, color=sensor_id)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 1)
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 1)+
facet_wrap(~sensor_id)
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated, color=sensor_id)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 1)
library("RMySQL")
library("DBI")
library("GPArotation")
library("ggplot2")
library("tidyverse")
library("marelac")
library("tidyquant")
ggplot(wq, aes(x = observation_datetime, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 1, color= "red")+
facet_wrap(~location_id)
View(wq)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 1, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 5, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 10, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
#geom_line() +
geom_ma(ma_fun = SMA, n = 10, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 20, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 50, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 100, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 100, color= "red", size=2)+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 100, color= "red")+
facet_wrap(~location_id)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 100, color= "red")+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 100, color= "red", size=1.5)+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 50, color= "red", size=1.5)+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 50, color= "red", size=1.5,linetype=5)+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 10, color= "red",linetype=5)+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 10, color= "red",linetype=5)+
coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
wq$date<- as.POSIXct(wq$observation_datetime, tz="EST",usetz=TRUE)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 10, color= "red",linetype=5)+
coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
class(wq$date)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
coord_x_date(xlim = c(today() - weeks(12), today()))+
geom_ma(ma_fun = SMA, n = 10, color= "red",linetype=5)+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=5)+
coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=5)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=5, size= 1.5)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=5, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_line() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
wq %>%
filter(date >= start - days(2 * n_mavg)) %>%
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
wq %>%
filter(date >= start - days(30)) %>%
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point() +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point(alpha=0.6) +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1.1, size= 1.1)+
#coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point(alpha=0.6) +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1.1, size= 1.1)+
coord_x_date(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point(alpha=0.6) +
geom_ma(ma_fun = SMA, n = 200, color= "red",linetype=1.1, size= 1.1)+
coord_x_datetime(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
ggplot(wq, aes(x = date, y = salinity_psu_calculated)) +
geom_point(alpha=0.6) +
geom_ma(ma_fun = SMA, n = 100, color= "red",linetype=1.1, size= 1.1)+
coord_x_datetime(xlim = c(today() - weeks(12), today()))+
facet_wrap(~location_id, ncol=2)
